[{"line":1,"elements":[{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"url baseUrl","result":{"duration":85200,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# baseUrl comes from karate-config.js"],"keyword":"*","line":5},{"name":"header Content-Type = 'application\/json'","result":{"duration":45000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":6}]},{"start_timestamp":"2025-11-06T22:44:45.147Z","line":9,"name":"Borrow items, save loan id, return items, assert closed + returnedDate set","description":"","id":"borrow-items,-save-loan-id,-return-items,-assert-closed-+-returneddate-set","type":"scenario","keyword":"Scenario","steps":[{"name":"path 'v1', 'members', 1, 'loans'","result":{"duration":114000,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 1) Borrow books"],"keyword":"Given","line":11},{"name":"request { items: [1, 2, 4] }","result":{"duration":96300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":12},{"name":"method post","result":{"duration":7619800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":13,"doc_string":{"content_type":"","value":"19:44:45.149 request:\n1 > POST http:\/\/localhost:48543\/v1\/members\/1\/loans\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 17\n1 > Host: localhost:48543\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n1 > Accept-Encoding: gzip,deflate\n{\"items\":[1,2,4]}\n\n19:44:45.154 response time in milliseconds: 4\n1 < 200\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Thu, 06 Nov 2025 22:44:45 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"id\":3,\"memberId\":1,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"items\":[{\"id\":1,\"title\":\"Clean Code\",\"type\":\"BOOK\",\"returnedDate\":null},{\"id\":2,\"title\":\"Effective Java\",\"type\":\"BOOK\",\"returnedDate\":null},{\"id\":4,\"title\":\"Nature Neuroscience\",\"type\":\"JOURNAL\",\"returnedDate\":null}],\"status\":\"OPEN\"}\n\n","line":13}},{"name":"status 200","result":{"duration":18800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":14},{"name":"match response.status == 'OPEN'","result":{"duration":387000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":15},{"name":"def loanId = response.id","result":{"duration":344500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":16},{"name":"print 'loanId ->', loanId","result":{"duration":484200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":17,"doc_string":{"content_type":"","value":"19:44:45.157 [print] loanId -> 3 \n","line":17}},{"name":"path 'v1', 'members', 1, 'loans'","result":{"duration":136800,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 2) Retrieve all loans for member 1 and assert the loan appears"],"keyword":"Given","line":20},{"name":"method get","result":{"duration":7401600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":21,"doc_string":{"content_type":"","value":"19:44:45.158 request:\n2 > GET http:\/\/localhost:48543\/v1\/members\/1\/loans\n2 > Host: localhost:48543\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n2 > Accept-Encoding: gzip,deflate\n\n\n19:44:45.163 response time in milliseconds: 4\n2 < 200\n2 < Content-Type: application\/json\n2 < Transfer-Encoding: chunked\n2 < Date: Thu, 06 Nov 2025 22:44:45 GMT\n2 < Keep-Alive: timeout=60\n2 < Connection: keep-alive\n[{\"loanId\":1,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"status\":\"CLOSED\"},{\"loanId\":2,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"status\":\"CLOSED\"},{\"loanId\":3,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"status\":\"OPEN\"}]\n\n","line":21}},{"name":"status 200","result":{"duration":17800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":22},{"name":"match response[*].loanId contains loanId","result":{"duration":536100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":23},{"name":"path 'v1', 'loans', loanId, 'returns'","result":{"duration":170300,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 3) Return the borrowed items (call returns endpoint)"],"keyword":"Given","line":26},{"name":"request { items: [1, 2, 4] }","result":{"duration":96400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":27},{"name":"method post","result":{"duration":7413200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":28,"doc_string":{"content_type":"","value":"19:44:45.166 request:\n3 > POST http:\/\/localhost:48543\/v1\/loans\/3\/returns\n3 > Content-Type: application\/json; charset=UTF-8\n3 > Content-Length: 17\n3 > Host: localhost:48543\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n3 > Accept-Encoding: gzip,deflate\n{\"items\":[1,2,4]}\n\n19:44:45.172 response time in milliseconds: 6\n3 < 200\n3 < Content-Type: application\/json\n3 < Transfer-Encoding: chunked\n3 < Date: Thu, 06 Nov 2025 22:44:45 GMT\n3 < Keep-Alive: timeout=60\n3 < Connection: keep-alive\n{\"id\":3,\"memberId\":1,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"items\":[{\"id\":1,\"title\":\"Clean Code\",\"type\":\"BOOK\",\"returnedDate\":\"2025-11-06\"},{\"id\":2,\"title\":\"Effective Java\",\"type\":\"BOOK\",\"returnedDate\":\"2025-11-06\"},{\"id\":4,\"title\":\"Nature Neuroscience\",\"type\":\"JOURNAL\",\"returnedDate\":\"2025-11-06\"}],\"status\":\"CLOSED\"}\n\n","line":28}},{"name":"status 200","result":{"duration":14200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":29},{"name":"match response.status == 'CLOSED'","result":{"duration":371600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":31},{"name":"match each response.items[*].returnedDate == '#notnull'","result":{"duration":880500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":32},{"name":"path 'v1', 'loans', loanId","result":{"duration":132000,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 4) Get the loan by id and double-check final state"],"keyword":"Given","line":35},{"name":"method get","result":{"duration":6560300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":36,"doc_string":{"content_type":"","value":"19:44:45.175 request:\n4 > GET http:\/\/localhost:48543\/v1\/loans\/3\n4 > Host: localhost:48543\n4 > Connection: Keep-Alive\n4 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n4 > Accept-Encoding: gzip,deflate\n\n\n19:44:45.181 response time in milliseconds: 6\n4 < 200\n4 < Content-Type: application\/json\n4 < Transfer-Encoding: chunked\n4 < Date: Thu, 06 Nov 2025 22:44:45 GMT\n4 < Keep-Alive: timeout=60\n4 < Connection: keep-alive\n{\"id\":3,\"memberId\":1,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"items\":[{\"id\":1,\"title\":\"Clean Code\",\"type\":\"BOOK\",\"returnedDate\":\"2025-11-06\"},{\"id\":2,\"title\":\"Effective Java\",\"type\":\"BOOK\",\"returnedDate\":\"2025-11-06\"},{\"id\":4,\"title\":\"Nature Neuroscience\",\"type\":\"JOURNAL\",\"returnedDate\":\"2025-11-06\"}],\"status\":\"CLOSED\"}\n\n","line":36}},{"name":"status 200","result":{"duration":10800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":37},{"name":"match response.status == 'CLOSED'","result":{"duration":295300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":38},{"name":"match each response.items[*].returnedDate == '#notnull'","result":{"duration":816800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":39}],"tags":[{"name":"@library-management","line":8}]},{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"url baseUrl","result":{"duration":71700,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# baseUrl comes from karate-config.js"],"keyword":"*","line":5},{"name":"header Content-Type = 'application\/json'","result":{"duration":47100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":6}]},{"start_timestamp":"2025-11-06T22:44:45.187Z","line":42,"name":"Partial return flow - borrow items 3 and 5, return item 3, then item 5","description":"","id":"partial-return-flow---borrow-items-3-and-5,-return-item-3,-then-item-5","type":"scenario","keyword":"Scenario","steps":[{"name":"path 'v1', 'members', 1, 'loans'","result":{"duration":96900,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 1) Borrow books with ids 3 and 5"],"keyword":"Given","line":44},{"name":"request { items: [3, 5] }","result":{"duration":98900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":45},{"name":"method post","result":{"duration":6161200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":46,"doc_string":{"content_type":"","value":"19:44:45.189 request:\n1 > POST http:\/\/localhost:48543\/v1\/members\/1\/loans\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 15\n1 > Host: localhost:48543\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n1 > Accept-Encoding: gzip,deflate\n{\"items\":[3,5]}\n\n19:44:45.194 response time in milliseconds: 4\n1 < 200\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Thu, 06 Nov 2025 22:44:45 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"id\":4,\"memberId\":1,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"items\":[{\"id\":3,\"title\":\"The Pragmatic Programmer\",\"type\":\"BOOK\",\"returnedDate\":null},{\"id\":5,\"title\":\"IEEE Transactions on Computers\",\"type\":\"JOURNAL\",\"returnedDate\":null}],\"status\":\"OPEN\"}\n\n","line":46}},{"name":"status 200","result":{"duration":10700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":47},{"name":"match response.status == 'OPEN'","result":{"duration":210700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":48},{"name":"def loanId2 = response.id","result":{"duration":195200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":49},{"name":"print 'loanId2 ->', loanId2","result":{"duration":420700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":50,"doc_string":{"content_type":"","value":"19:44:45.195 [print] loanId2 -> 4 \n","line":50}},{"name":"path 'v1', 'members', 1, 'loans'","result":{"duration":126200,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 2) Ensure the new loan appears in the member's loans list"],"keyword":"Given","line":53},{"name":"method get","result":{"duration":5797600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":54,"doc_string":{"content_type":"","value":"19:44:45.196 request:\n2 > GET http:\/\/localhost:48543\/v1\/members\/1\/loans\n2 > Host: localhost:48543\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n2 > Accept-Encoding: gzip,deflate\n\n\n19:44:45.201 response time in milliseconds: 5\n2 < 200\n2 < Content-Type: application\/json\n2 < Transfer-Encoding: chunked\n2 < Date: Thu, 06 Nov 2025 22:44:45 GMT\n2 < Keep-Alive: timeout=60\n2 < Connection: keep-alive\n[{\"loanId\":1,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"status\":\"CLOSED\"},{\"loanId\":2,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"status\":\"CLOSED\"},{\"loanId\":3,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"status\":\"CLOSED\"},{\"loanId\":4,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"status\":\"OPEN\"}]\n\n","line":54}},{"name":"status 200","result":{"duration":11200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":55},{"name":"match response[*].loanId contains loanId2","result":{"duration":287600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":56},{"name":"path 'v1', 'loans', loanId2, 'returns'","result":{"duration":163400,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 3) Return only item 3"],"keyword":"Given","line":59},{"name":"request { items: [3] }","result":{"duration":88000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":60},{"name":"method post","result":{"duration":5676800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":61,"doc_string":{"content_type":"","value":"19:44:45.203 request:\n3 > POST http:\/\/localhost:48543\/v1\/loans\/4\/returns\n3 > Content-Type: application\/json; charset=UTF-8\n3 > Content-Length: 13\n3 > Host: localhost:48543\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n3 > Accept-Encoding: gzip,deflate\n{\"items\":[3]}\n\n19:44:45.207 response time in milliseconds: 4\n3 < 200\n3 < Content-Type: application\/json\n3 < Transfer-Encoding: chunked\n3 < Date: Thu, 06 Nov 2025 22:44:45 GMT\n3 < Keep-Alive: timeout=60\n3 < Connection: keep-alive\n{\"id\":4,\"memberId\":1,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"items\":[{\"id\":3,\"title\":\"The Pragmatic Programmer\",\"type\":\"BOOK\",\"returnedDate\":\"2025-11-06\"},{\"id\":5,\"title\":\"IEEE Transactions on Computers\",\"type\":\"JOURNAL\",\"returnedDate\":null}],\"status\":\"OPEN\"}\n\n","line":61}},{"name":"status 200","result":{"duration":11300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":62},{"name":"path 'v1', 'loans', loanId2","result":{"duration":216000,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 4) Get the loan and check status is still OPEN and only item 3 has returnedDate"],"keyword":"Given","line":65},{"name":"method get","result":{"duration":4746700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":66,"doc_string":{"content_type":"","value":"19:44:45.208 request:\n4 > GET http:\/\/localhost:48543\/v1\/loans\/4\n4 > Host: localhost:48543\n4 > Connection: Keep-Alive\n4 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n4 > Accept-Encoding: gzip,deflate\n\n\n19:44:45.212 response time in milliseconds: 3\n4 < 200\n4 < Content-Type: application\/json\n4 < Transfer-Encoding: chunked\n4 < Date: Thu, 06 Nov 2025 22:44:45 GMT\n4 < Keep-Alive: timeout=60\n4 < Connection: keep-alive\n{\"id\":4,\"memberId\":1,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"items\":[{\"id\":3,\"title\":\"The Pragmatic Programmer\",\"type\":\"BOOK\",\"returnedDate\":\"2025-11-06\"},{\"id\":5,\"title\":\"IEEE Transactions on Computers\",\"type\":\"JOURNAL\",\"returnedDate\":null}],\"status\":\"OPEN\"}\n\n","line":66}},{"name":"status 200","result":{"duration":13600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":67},{"name":"match response.status == 'OPEN'","result":{"duration":332800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":68},{"name":"def item3List = karate.jsonPath(response.items, \"$[?(@.id == 3)]\")","result":{"duration":720800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":70},{"name":"match item3List == '#[1]'","result":{"duration":518500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":71},{"name":"match item3List[0].returnedDate == '#notnull'","result":{"duration":207900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":72},{"name":"def item5List = karate.jsonPath(response.items, \"$[?(@.id == 5)]\")","result":{"duration":379800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":74},{"name":"match item3List == '#[1]'","result":{"duration":467700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":75},{"name":"match item5List[0].returnedDate == '#null'","result":{"duration":189300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":76},{"name":"path 'v1', 'loans', loanId2, 'returns'","result":{"duration":106600,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 5) Return the remaining item 5"],"keyword":"Given","line":79},{"name":"request { items: [5] }","result":{"duration":74900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":80},{"name":"method post","result":{"duration":5486700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":81,"doc_string":{"content_type":"","value":"19:44:45.217 request:\n5 > POST http:\/\/localhost:48543\/v1\/loans\/4\/returns\n5 > Content-Type: application\/json; charset=UTF-8\n5 > Content-Length: 13\n5 > Host: localhost:48543\n5 > Connection: Keep-Alive\n5 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n5 > Accept-Encoding: gzip,deflate\n{\"items\":[5]}\n\n19:44:45.221 response time in milliseconds: 3\n5 < 200\n5 < Content-Type: application\/json\n5 < Transfer-Encoding: chunked\n5 < Date: Thu, 06 Nov 2025 22:44:45 GMT\n5 < Keep-Alive: timeout=60\n5 < Connection: keep-alive\n{\"id\":4,\"memberId\":1,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"items\":[{\"id\":3,\"title\":\"The Pragmatic Programmer\",\"type\":\"BOOK\",\"returnedDate\":\"2025-11-06\"},{\"id\":5,\"title\":\"IEEE Transactions on Computers\",\"type\":\"JOURNAL\",\"returnedDate\":\"2025-11-06\"}],\"status\":\"CLOSED\"}\n\n","line":81}},{"name":"status 200","result":{"duration":10600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":82},{"name":"path 'v1', 'loans', loanId2","result":{"duration":154900,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 6) Get the loan and assert it's CLOSED and every item has a returnedDate"],"keyword":"Given","line":85},{"name":"method get","result":{"duration":4549700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":86,"doc_string":{"content_type":"","value":"19:44:45.222 request:\n6 > GET http:\/\/localhost:48543\/v1\/loans\/4\n6 > Host: localhost:48543\n6 > Connection: Keep-Alive\n6 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n6 > Accept-Encoding: gzip,deflate\n\n\n19:44:45.226 response time in milliseconds: 4\n6 < 200\n6 < Content-Type: application\/json\n6 < Transfer-Encoding: chunked\n6 < Date: Thu, 06 Nov 2025 22:44:45 GMT\n6 < Keep-Alive: timeout=60\n6 < Connection: keep-alive\n{\"id\":4,\"memberId\":1,\"loanDate\":\"2025-11-06\",\"expectedReturnDate\":\"2025-11-20\",\"items\":[{\"id\":3,\"title\":\"The Pragmatic Programmer\",\"type\":\"BOOK\",\"returnedDate\":\"2025-11-06\"},{\"id\":5,\"title\":\"IEEE Transactions on Computers\",\"type\":\"JOURNAL\",\"returnedDate\":\"2025-11-06\"}],\"status\":\"CLOSED\"}\n\n","line":86}},{"name":"status 200","result":{"duration":9300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":87},{"name":"match response.status == 'CLOSED'","result":{"duration":354200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":88},{"name":"match each response.items[*].returnedDate == '#notnull'","result":{"duration":681600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":89}],"tags":[{"name":"@library-management","line":41}]}],"name":"karate\/BorrowAndReturnBooks.feature","description":"Borrow and return books flow for member 1","id":"borrow-and-return-books-flow-for-member-1","keyword":"Feature","uri":"karate\/BorrowAndReturnBooks.feature"}]